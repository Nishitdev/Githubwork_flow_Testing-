name: Auto Reply to Issues
on:
  issues:
    types:
      - opened

jobs:
  auto-reply:
    runs-on: ubuntu-latest

    steps:
      - name: Check out code
        uses: actions/checkout@v2

      - name: Reply to issue
        env:
          BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          GITHUB_ACTOR: ${{ github.actor }}
        run: |
          ISSUE_NUMBER=$(jq --raw-output .issue.number "$GITHUB_EVENT_PATH")
          COMMENT_BODY="Thank you, @$GITHUB_ACTOR, for creating the issue! We'll look into it shortly."
          API_URL="https://api.github.com/repos/${{ github.repository }}/issues/${ISSUE_NUMBER}/comments"
          curl -X POST -H "Authorization: token $BOT_TOKEN" -d "{\"body\":\"$COMMENT_BODY\"}" "$API_URL"
